#!/usr/bin/env python3
"""
–ú–æ–¥—É–ª—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–∏—Å—Ç–µ–º—ã.
–î–æ–±–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∑–∞–¥–∞—á.
"""

from datetime import datetime
import pytz

def get_current_datetime_info():
    """
    –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è —Å–∏—Å—Ç–µ–º—ã —Å –ø–æ—è—Å–æ–º.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.
    """
    try:
        # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è
        now = datetime.now()

        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –ò—Ä–∫—É—Ç—Å–∫–∞
        irkutsk_tz = pytz.timezone('Asia/Irkutsk')
        irkutsk_time = now.astimezone(irkutsk_tz)

        info = {
            'system_date': now.strftime('%Y-%m-%d'),
            'system_time': now.strftime('%H:%M:%S'),
            'system_datetime': now.strftime('%Y-%m-%d %H:%M:%S'),
            'irkutsk_date': irkutsk_time.strftime('%Y-%m-%d'),
            'irkutsk_time': irkutsk_time.strftime('%H:%M:%S'),
            'irkutsk_datetime': irkutsk_time.strftime('%Y-%m-%d %H:%M:%S'),
            'year': now.year,
            'month': now.month,
            'day': now.day,
            'weekday': now.strftime('%A'),
            'is_future': now.year > 2024,  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –±—É–¥—É—â–µ–µ –≤—Ä–µ–º—è
            'timezone': 'Asia/Irkutsk (UTC+8)',
            'note': '–í–°–ï–ì–î–ê –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —ç—Ç—É –¥–∞—Ç—É –ø–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ —Ç–µ–∫—É—â–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö!'
        }

        return info

    except Exception as e:
        return {
            'error': str(e),
            'note': '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–∞—Ç–µ'
        }

def format_date_warning():
    """
    –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ø—Ä–æ–≤–µ—Ä–∫–µ –¥–∞—Ç—ã –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.
    """
    info = get_current_datetime_info()

    if 'error' in info:
        return "‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—É—é –¥–∞—Ç—É!"

    warning = f"""
‚ö†Ô∏è **–í–ê–ñ–ù–û–ï –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï –û –î–ê–¢–ï:**

üìÖ **–°–ò–°–¢–ï–ú–ù–ê–Ø –î–ê–¢–ê:** {info['system_datetime']}
üåè **–ò–†–ö–£–¢–°–ö:** {info['irkutsk_datetime']} (UTC+8)

üîç **–ê–ù–ê–õ–ò–ó:**
‚Ä¢ –ì–æ–¥: {info['year']}
‚Ä¢ –ú–µ—Å—è—Ü: {info['month']} ({info['weekday']})
‚Ä¢ –î–µ–Ω—å: {info['day']}
‚Ä¢ –≠—Ç–æ –±—É–¥—É—â–µ–µ –≤—Ä–µ–º—è: {'–î–ê' if info['is_future'] else '–ù–ï–¢'}

üö® **–ò–ù–°–¢–†–£–ö–¶–ò–Ø:**
1. –í–°–ï–ì–î–ê –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ç–µ–∫—É—â—É—é —Å–∏—Å—Ç–µ–º–Ω—É—é –¥–∞—Ç—É –ø–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º
2. –ï—Å–ª–∏ –≥–æ–¥ > 2024, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ "—Ç–µ–∫—É—â–∏—Ö" —Å–æ–±—ã—Ç–∏—è—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π
3. –£—Ç–æ—á–Ω—è–π—Ç–µ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–∞–∫–∞—è –¥–∞—Ç–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞
4. –î–ª—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞—Ç—ã –∏–∑ –∑–∞–ø—Ä–æ—Å–∞

{info['note']}
"""

    return warning

def check_date_before_response(user_query):
    """
    –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–∞—Ç—É –ø–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º –Ω–∞ –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –µ—Å–ª–∏ –¥–∞—Ç–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞.
    """
    info = get_current_datetime_info()

    # –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, —Ç—Ä–µ–±—É—é—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞—Ç—ã
    date_sensitive_keywords = [
        '—Å–µ–≥–æ–¥–Ω—è', '—Å–µ–π—á–∞—Å', '—Ç–µ–∫—É—â–∏–π', '–∏–¥–µ—Ç', 'live', '—Ç—É—Ä–Ω–∏—Ä', '–º–∞—Ç—á',
        '–ø–æ–≥–æ–¥–∞', '—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ', '–Ω–æ–≤–æ—Å—Ç–∏', '—Å–æ–±—ã—Ç–∏—è', '–∞–∫—Ç—É–∞–ª—å–Ω',
        '–≤—á–µ—Ä–∞', '–∑–∞–≤—Ç—Ä–∞', '–Ω–µ–¥–µ–ª—è', '–º–µ—Å—è—Ü', '–≥–æ–¥'
    ]

    query_lower = user_query.lower()
    needs_date_check = any(keyword in query_lower for keyword in date_sensitive_keywords)

    if needs_date_check and info.get('is_future', False):
        return format_date_warning() + f"\n\nüìù **–ó–ê–ü–†–û–° –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø:** {user_query}"

    return None

if __name__ == "__main__":
    # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è
    print("=== –¢–ï–°–¢ –ü–†–û–í–ï–†–ö–ò –î–ê–¢–´ ===")
    info = get_current_datetime_info()
    for key, value in info.items():
        print(f"{key}: {value}")
    print("\n" + format_date_warning())